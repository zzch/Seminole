<div class="pageheader">
  <h2><i class="fa fa-pencil-square-o"></i> 课时管理 <span>新建</span></h2>
</div>
<div class="contentpanel">
  <%= render "op/commons/error_messages", target: @lesson %>
  <div class="panel panel-default">
    <%= form_for [@course, @lesson], html: { class: 'form-horizontal form-bordered' } do |f| %>
      <div class="panel-body panel-body-nopadding">
        <div class="form-group">
          <label class="col-sm-3 control-label"><%= brac_arat 'lesson.coach' %></label>
          <div class="col-sm-6">
            <%= text_field_tag nil, @course.coach.name, readonly: true, class: 'form-control' %>
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label"><%= brac_arat 'lesson.course' %></label>
          <div class="col-sm-6">
            <%= text_field_tag nil, @course.name, readonly: true, class: 'form-control' %>
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label"><%= brac_arat 'lesson.name' %></label>
          <div class="col-sm-6">
            <%= f.text_field :name, class: 'form-control' %>
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label"><%= brac_arat 'lesson.started_at' %></label>
          <div class="col-sm-3">
            <div class="input-group">
              <%= f.text_field :started_at_date, value: brac_date(Time.now), class: 'form-control' %>
              <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
            </div>
          </div>
          <div class="col-sm-3">
            <div class="input-group">
              <div class="bootstrap-timepicker"><%= f.text_field :started_at_time, class: 'form-control' %></div>
              <span class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label"><%= brac_arat 'lesson.finished_at' %></label>
          <div class="col-sm-3">
            <div class="input-group">
              <%= f.text_field :finished_at_date, value: brac_date(Time.now), class: 'form-control' %>
              <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
            </div>
          </div>
          <div class="col-sm-3">
            <div class="input-group">
              <div class="bootstrap-timepicker"><%= f.text_field :finished_at_time, class: 'form-control' %></div>
              <span class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label"><%= brac_arat 'lesson.maximum_students' %> <span class="asterisk">*</span></label>
          <div class="col-sm-6">
            <%= f.text_field :maximum_students, class: 'form-control' %>
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-12 text-center">
            <%= f.submit '提交', class: 'btn btn-primary' %>&nbsp;
            <%= link_to '返回', @lesson.course, class: 'btn btn-default' %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
<% content_for :javascript do %>
  <script>
    jQuery(document).ready(function(){
      $('#lesson_category_id').chosen({'width': '100%', 'white-space': 'nowrap'});
      $('#lesson_started_at_date').datepicker({dateFormat: 'yy-mm-dd'});
      $('#lesson_started_at_time').timepicker({defaultTIme: false, showMeridian: false, minuteStep: 5});
      $('#lesson_finished_at_date').datepicker({dateFormat: 'yy-mm-dd'});
      $('#lesson_finished_at_time').timepicker({defaultTIme: false, showMeridian: false, minuteStep: 5});
    });
  </script>
<% end %>